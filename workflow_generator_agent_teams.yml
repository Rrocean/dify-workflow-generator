# Dify Workflow Generator - Agent Teams ç‰ˆæœ¬
# ä½¿ç”¨å¤šä»£ç†å¹¶è¡Œæ¶æ„ç”Ÿæˆå·¥ä½œæµ
# å¯¼å…¥ Dify åï¼Œé€šè¿‡å¯¹è¯å½¢å¼ç”Ÿæˆå…¶ä»–å·¥ä½œæµ
# DSL Version: 0.5.0

app:
  name: AgentTeamså·¥ä½œæµç”Ÿæˆå™¨
  mode: advanced-chat
  icon: ğŸš€
  description: ä½¿ç”¨å¤šä»£ç†å¹¶è¡Œæ¶æ„ï¼Œæ™ºèƒ½ç”Ÿæˆé«˜è´¨é‡ Dify å·¥ä½œæµ
  use_icon_as_answer_icon: false

workflow:
  # ========== èŠ‚ç‚¹å®šä¹‰ ==========
  nodes:
    # ---- å¼€å§‹èŠ‚ç‚¹ ----
    - id: start
      type: start
      title: å¼€å§‹
      position:
        x: 80
        y: 400
      data:
        variables:
          - name: requirement
            type: string
            description: æè¿°ä½ æƒ³è¦åˆ›å»ºçš„å·¥ä½œæµï¼ˆå¦‚ï¼šä¸€ä¸ªå®¢æœæœºå™¨äººï¼Œèƒ½å›ç­”è®¢å•ç›¸å…³é—®é¢˜ï¼‰
            required: true
          - name: workflow_name
            type: string
            description: å·¥ä½œæµåç§°ï¼ˆå¯é€‰ï¼‰
            required: false
          - name: complexity
            type: string
            description: å¤æ‚åº¦ (simple/medium/complexï¼Œé»˜è®¤ auto)
            required: false

    # ---- éœ€æ±‚åˆ†æä»£ç† (Agent 1) ----
    - id: agent_requirement_analyst
      type: llm
      title: éœ€æ±‚åˆ†æä»£ç†
      position:
        x: 350
        y: 150
      data:
        model:
          provider: anthropic
          name: claude-3-5-sonnet-20241022
          mode: chat
          completion_params:
            temperature: 0.3
            max_tokens: 2000
        prompt_template:
          - role: system
            text: |
              ã€Agent Role: Requirement Analystã€‘

              ä½ æ˜¯ä¸“ä¸šçš„éœ€æ±‚åˆ†æå¸ˆã€‚æ·±å…¥ç†è§£ç”¨æˆ·éœ€æ±‚ï¼Œæå–å…³é”®è¦ç´ ã€‚

              åˆ†æç»´åº¦ï¼š
              1. æ ¸å¿ƒåŠŸèƒ½éœ€æ±‚
              2. è¾“å…¥/è¾“å‡ºæ•°æ®
              3. ä¸šåŠ¡è§„åˆ™
              4. è¾¹ç•Œæ¡ä»¶
              5. éšå«éœ€æ±‚

              è¾“å‡ºä¸¥æ ¼çš„ JSON æ ¼å¼ï¼š
              {
                "core_functions": ["åŠŸèƒ½1", "åŠŸèƒ½2"],
                "inputs": [{"name": "", "type": "", "description": ""}],
                "outputs": [{"name": "", "type": "", "description": ""}],
                "business_rules": ["è§„åˆ™1"],
                "estimated_nodes": æ•°å­—,
                "complexity": "simple|medium|complex",
                "special_requirements": ["ç‰¹æ®Šéœ€æ±‚"]
              }
          - role: user
            text: |
              åˆ†æä»¥ä¸‹å·¥ä½œæµéœ€æ±‚ï¼š

              {{#start.requirement#}}

              å¤æ‚åº¦è¦æ±‚ï¼š{{#start.complexity#}}

              è¯·è¿”å› JSON æ ¼å¼çš„åˆ†æç»“æœã€‚
        variables:
          - name: start.requirement
            value_selector: ["start", "requirement"]
          - name: start.complexity
            value_selector: ["start", "complexity"]

    # ---- æ¶æ„å¸ˆä»£ç† (Agent 2) - å¹¶è¡Œ ----
    - id: agent_architect
      type: llm
      title: å·¥ä½œæµæ¶æ„å¸ˆ
      position:
        x: 350
        y: 400
      data:
        model:
          provider: anthropic
          name: claude-3-5-sonnet-20241022
          mode: chat
          completion_params:
            temperature: 0.4
            max_tokens: 3000
        prompt_template:
          - role: system
            text: |
              ã€Agent Role: Workflow Architectã€‘

              ä½ æ˜¯ Dify å·¥ä½œæµæ¶æ„ä¸“å®¶ã€‚è®¾è®¡é«˜å¯ç”¨ã€æ˜“ç»´æŠ¤çš„å·¥ä½œæµæ¶æ„ã€‚

              è®¾è®¡åŸåˆ™ï¼š
              1. å•ä¸€èŒè´£ï¼šæ¯ä¸ªèŠ‚ç‚¹åªåšä¸€ä»¶äº‹
              2. åˆç†åˆ†å±‚ï¼šè¾“å…¥â†’å¤„ç†â†’è¾“å‡º
              3. é”™è¯¯å¤„ç†ï¼šè€ƒè™‘å¼‚å¸¸æƒ…å†µ
              4. å¯æ‰©å±•æ€§ï¼šé¢„ç•™æ‰©å±•ç©ºé—´

              è¾“å‡ºæ ¼å¼ï¼š
              {
                "architecture_pattern": "sequential|parallel|conditional|iterative",
                "nodes": [
                  {"id": "", "type": "", "purpose": "", "dependencies": []}
                ],
                "data_flow": "æè¿°æ•°æ®å¦‚ä½•æµåŠ¨",
                "error_handling": "é”™è¯¯å¤„ç†ç­–ç•¥"
              }
          - role: user
            text: |
              ä¸ºä»¥ä¸‹éœ€æ±‚è®¾è®¡å·¥ä½œæµæ¶æ„ï¼š

              {{#start.requirement#}}

              è¯·è¿”å›æ¶æ„è®¾è®¡æ–¹æ¡ˆã€‚
        variables:
          - name: start.requirement
            value_selector: ["start", "requirement"]

    # ---- æŠ€æœ¯é¡¾é—®ä»£ç† (Agent 3) - å¹¶è¡Œ ----
    - id: agent_tech_advisor
      type: llm
      title: æŠ€æœ¯é¡¾é—®
      position:
        x: 350
        y: 650
      data:
        model:
          provider: anthropic
          name: claude-3-5-sonnet-20241022
          mode: chat
          completion_params:
            temperature: 0.3
            max_tokens: 2000
        prompt_template:
          - role: system
            text: |
              ã€Agent Role: Technical Advisorã€‘

              ä½ æ˜¯æŠ€æœ¯é€‰å‹ä¸“å®¶ã€‚ä¸ºå·¥ä½œæµæ¨èæœ€é€‚åˆçš„æŠ€æœ¯æ–¹æ¡ˆã€‚

              è¯„ä¼°ç»´åº¦ï¼š
              1. æ¨¡å‹é€‰æ‹©ï¼ˆæ ¹æ®ä»»åŠ¡å¤æ‚åº¦ï¼‰
              2. å·¥å…·/API éœ€æ±‚
              3. æ€§èƒ½ä¼˜åŒ–å»ºè®®
              4. æˆæœ¬ä¼°ç®—

              è¾“å‡ºæ ¼å¼ï¼š
              {
                "recommended_model": "æ¨¡å‹åç§°åŠç†ç”±",
                "tools_needed": ["å·¥å…·1"],
                "optimization_tips": ["å»ºè®®1"],
                "estimated_cost": "æˆæœ¬ä¼°ç®—"
              }
          - role: user
            text: |
              ä¸ºä»¥ä¸‹éœ€æ±‚æä¾›æŠ€æœ¯å»ºè®®ï¼š

              {{#start.requirement#}}

              è¯·è¿”å›æŠ€æœ¯æ–¹æ¡ˆå»ºè®®ã€‚
        variables:
          - name: start.requirement
            value_selector: ["start", "requirement"]

    # ---- å˜é‡èšåˆ - æ±‡æ€»å¹¶è¡Œä»£ç†ç»“æœ ----
    - id: aggregate_agent_outputs
      type: variable-aggregator
      title: èšåˆä»£ç†è¾“å‡º
      position:
        x: 650
        y: 400
      data:
        variables:
          - name: requirement_analysis
            value_selector: ["agent_requirement_analyst", "text"]
          - name: architecture_design
            value_selector: ["agent_architect", "text"]
          - name: tech_advice
            value_selector: ["agent_tech_advisor", "text"]

    # ---- èŠ‚ç‚¹å®ç°ä»£ç† (Agent 4) ----
    - id: agent_implementer
      type: llm
      title: èŠ‚ç‚¹å®ç°å¸ˆ
      position:
        x: 900
        y: 300
      data:
        model:
          provider: anthropic
          name: claude-3-5-sonnet-20241022
          mode: chat
          completion_params:
            temperature: 0.2
            max_tokens: 8000
        prompt_template:
          - role: system
            text: |
              ã€Agent Role: Node Implementerã€‘

              ä½ æ˜¯ Dify DSL ç¼–ç ä¸“å®¶ã€‚æ ¹æ®æ¶æ„è®¾è®¡ç”Ÿæˆç²¾ç¡®çš„ YAML ä»£ç ã€‚

              DSL è§„èŒƒè¦æ±‚ï¼š
              1. ä¸¥æ ¼éµå¾ª Dify DSL 0.5.0 æ ¼å¼
              2. æ¯ä¸ªèŠ‚ç‚¹å¿…é¡»æœ‰å”¯ä¸€ ID
              3. æ­£ç¡®è®¾ç½® position (x, y)
              4. å˜é‡å¼•ç”¨ä½¿ç”¨ {{#node_id.variable#}} æ ¼å¼
              5. æ‰€æœ‰å¿…éœ€çš„ data å­—æ®µå¿…é¡»å¡«å†™
              6. edges å¿…é¡»æ­£ç¡®è¿æ¥ source å’Œ target

              èŠ‚ç‚¹ç±»å‹é€‰æ‹©ï¼š
              - start: å·¥ä½œæµå…¥å£
              - end: å·¥ä½œæµç»“æŸ
              - llm: AI å¤„ç†èŠ‚ç‚¹
              - code: Python/JavaScript ä»£ç 
              - http: HTTP è¯·æ±‚
              - if-else: æ¡ä»¶åˆ†æ”¯
              - question-classifier: æ„å›¾åˆ†ç±»
              - knowledge-retrieval: çŸ¥è¯†åº“æ£€ç´¢
              - template: æ¨¡æ¿è½¬æ¢
              - variable-aggregator: å˜é‡èšåˆ
              - iteration: è¿­ä»£å¤„ç†
              - list-operator: åˆ—è¡¨æ“ä½œ
              - parameter-extractor: å‚æ•°æå–

              è¾“å‡ºï¼šå®Œæ•´çš„ YAMLï¼Œä» app: å¼€å§‹ï¼Œä¸è¦ markdown ä»£ç å—ã€‚
          - role: user
            text: |
              æ ¹æ®ä»¥ä¸‹ä¿¡æ¯ç”Ÿæˆå®Œæ•´çš„å·¥ä½œæµ YAMLï¼š

              === éœ€æ±‚åˆ†æ ===
              {{#aggregate_agent_outputs.requirement_analysis#}}

              === æ¶æ„è®¾è®¡ ===
              {{#aggregate_agent_outputs.architecture_design#}}

              === æŠ€æœ¯å»ºè®® ===
              {{#aggregate_agent_outputs.tech_advice#}}

              === åŸå§‹éœ€æ±‚ ===
              {{#start.requirement#}}

              å·¥ä½œæµåç§°ï¼š{{#start.workflow_name#}}

              è¯·ç”Ÿæˆå®Œæ•´çš„ã€å¯ç›´æ¥å¯¼å…¥ Dify çš„ YAML æ–‡ä»¶ã€‚
        variables:
          - name: aggregate_agent_outputs.requirement_analysis
            value_selector: ["aggregate_agent_outputs", "requirement_analysis"]
          - name: aggregate_agent_outputs.architecture_design
            value_selector: ["aggregate_agent_outputs", "architecture_design"]
          - name: aggregate_agent_outputs.tech_advice
            value_selector: ["aggregate_agent_outputs", "tech_advice"]
          - name: start.requirement
            value_selector: ["start", "requirement"]
          - name: start.workflow_name
            value_selector: ["start", "workflow_name"]

    # ---- éªŒè¯ä»£ç† (Agent 5) - å¹¶è¡Œ ----
    - id: agent_validator
      type: llm
      title: DSLéªŒè¯å¸ˆ
      position:
        x: 900
        y: 550
      data:
        model:
          provider: anthropic
          name: claude-3-5-sonnet-20241022
          mode: chat
          completion_params:
            temperature: 0.1
            max_tokens: 4000
        prompt_template:
          - role: system
            text: |
              ã€Agent Role: DSL Validatorã€‘

              ä½ æ˜¯ DSL éªŒè¯ä¸“å®¶ã€‚æ£€æŸ¥å·¥ä½œæµçš„æ­£ç¡®æ€§å’Œå®Œæ•´æ€§ã€‚

              éªŒè¯æ¸…å•ï¼š
              âœ“ YAML è¯­æ³•æœ‰æ•ˆ
              âœ“ æ‰€æœ‰èŠ‚ç‚¹ ID å”¯ä¸€
              âœ“ èŠ‚ç‚¹ç±»å‹æœ‰æ•ˆ
              âœ“ edges å¼•ç”¨å­˜åœ¨çš„èŠ‚ç‚¹
              âœ“ å˜é‡å¼•ç”¨æ ¼å¼æ­£ç¡®
              âœ“ å¼€å§‹å’Œç»“æŸèŠ‚ç‚¹å­˜åœ¨
              âœ“ æ²¡æœ‰å­¤ç«‹èŠ‚ç‚¹

              è¾“å‡º JSON æ ¼å¼ï¼š
              {
                "valid": true/false,
                "issues": ["é—®é¢˜æè¿°"],
                "suggestions": ["æ”¹è¿›å»ºè®®"],
                "risk_level": "low|medium|high"
              }
          - role: user
            text: |
              éªŒè¯ä»¥ä¸‹ DSLï¼š

              {{#agent_implementer.text#}}

              è¯·è¿”å›éªŒè¯ç»“æœã€‚
        variables:
          - name: agent_implementer.text
            value_selector: ["agent_implementer", "text"]

    # ---- ä¼˜åŒ–ä»£ç† (Agent 6) - å¹¶è¡Œ ----
    - id: agent_optimizer
      type: llm
      title: æ€§èƒ½ä¼˜åŒ–å¸ˆ
      position:
        x: 900
        y: 700
      data:
        model:
          provider: anthropic
          name: claude-3-5-sonnet-20241022
          mode: chat
          completion_params:
            temperature: 0.3
            max_tokens: 3000
        prompt_template:
          - role: system
            text: |
              ã€Agent Role: Performance Optimizerã€‘

              ä½ æ˜¯æ€§èƒ½ä¼˜åŒ–ä¸“å®¶ã€‚æå‡å·¥ä½œæµçš„æ‰§è¡Œæ•ˆç‡ã€‚

              ä¼˜åŒ–æ–¹å‘ï¼š
              1. å‡å°‘ä¸å¿…è¦çš„èŠ‚ç‚¹
              2. åˆå¹¶ç›¸ä¼¼æ“ä½œ
              3. ä¼˜åŒ– LLM è°ƒç”¨
              4. å»ºè®®ç¼“å­˜ç­–ç•¥
              5. å¹¶è¡ŒåŒ–æœºä¼š

              è¾“å‡ºæ ¼å¼ï¼š
              {
                "optimizations": ["å…·ä½“ä¼˜åŒ–å»ºè®®"],
                "estimated_improvement": "é¢„æœŸæå‡",
                "priority": "high|medium|low"
              }
          - role: user
            text: |
              åˆ†æä»¥ä¸‹å·¥ä½œæµçš„ä¼˜åŒ–æœºä¼šï¼š

              {{#agent_implementer.text#}}

              è¯·è¿”å›ä¼˜åŒ–å»ºè®®ã€‚
        variables:
          - name: agent_implementer.text
            value_selector: ["agent_implementer", "text"]

    # ---- å˜é‡èšåˆ - æ±‡æ€»å®ç°å’ŒéªŒè¯ ----
    - id: aggregate_validation
      type: variable-aggregator
      title: æ±‡æ€»éªŒè¯ç»“æœ
      position:
        x: 1200
        y: 450
      data:
        variables:
          - name: implementation
            value_selector: ["agent_implementer", "text"]
          - name: validation
            value_selector: ["agent_validator", "text"]
          - name: optimization
            value_selector: ["agent_optimizer", "text"]

    # ---- YAML æ¸…ç† ----
    - id: yaml_cleaner
      type: code
      title: YAMLæ ¼å¼åŒ–
      position:
        x: 1450
        y: 350
      data:
        code_language: python3
        code: |
          import re

          def main(yaml_text: str) -> dict:
              # æ¸…ç† markdown ä»£ç å—
              text = yaml_text.strip()
              
              patterns = [
                  r'^```yaml\s*\n',
                  r'^```yml\s*\n',
                  r'^```\s*\n',
                  r'\n```\s*$',
              ]
              
              for pattern in patterns:
                  text = re.sub(pattern, '', text, flags=re.MULTILINE)
              
              text = text.strip()
              
              # ç¡®ä¿ä»¥ app: å¼€å¤´
              if not text.startswith('app:'):
                  # æŸ¥æ‰¾ app: çš„ä½ç½®
                  idx = text.find('app:')
                  if idx != -1:
                      text = text[idx:]
              
              # åŸºç¡€éªŒè¯
              has_app = text.startswith('app:')
              has_nodes = 'nodes:' in text
              has_edges = 'edges:' in text
              
              return {
                  "yaml": text,
                  "valid": has_app and has_nodes,
                  "has_app": has_app,
                  "has_nodes": has_nodes,
                  "has_edges": has_edges,
                  "length": len(text)
              }
        inputs:
          - name: yaml_text
            value_selector: ["aggregate_validation", "implementation"]
        outputs:
          - name: yaml
            type: string
          - name: valid
            type: boolean
          - name: has_app
            type: boolean
          - name: has_nodes
            type: boolean

    # ---- æ–‡æ¡£ä»£ç† (Agent 7) ----
    - id: agent_documenter
      type: llm
      title: æ–‡æ¡£ç¼–å†™è€…
      position:
        x: 1450
        y: 600
      data:
        model:
          provider: anthropic
          name: claude-3-5-sonnet-20241022
          mode: chat
          completion_params:
            temperature: 0.5
            max_tokens: 3000
        prompt_template:
          - role: system
            text: |
              ã€Agent Role: Technical Writerã€‘

              ä½ æ˜¯æŠ€æœ¯æ–‡æ¡£ä¸“å®¶ã€‚ç¼–å†™æ¸…æ™°ã€å®ç”¨çš„å·¥ä½œæµæ–‡æ¡£ã€‚

              æ–‡æ¡£ç»“æ„ï¼š
              1. åŠŸèƒ½æ¦‚è¿°
              2. è¾“å…¥å‚æ•°è¯¦è§£
              3. ä½¿ç”¨æ­¥éª¤
              4. ç¤ºä¾‹åœºæ™¯
              5. æ³¨æ„äº‹é¡¹
              6. æ•…éšœæ’æŸ¥

              ä½¿ç”¨ Markdown æ ¼å¼ï¼ŒåŒ…å« emoji å¢å¼ºå¯è¯»æ€§ã€‚
          - role: user
            text: |
              ä¸ºä»¥ä¸‹å·¥ä½œæµç¼–å†™æ–‡æ¡£ï¼š

              åŸå§‹éœ€æ±‚ï¼š{{#start.requirement#}}

              éªŒè¯ç»“æœï¼š{{#aggregate_validation.validation#}}

              ä¼˜åŒ–å»ºè®®ï¼š{{#aggregate_validation.optimization#}}

              è¯·æä¾›å®Œæ•´çš„ä½¿ç”¨æ–‡æ¡£ã€‚
        variables:
          - name: start.requirement
            value_selector: ["start", "requirement"]
          - name: aggregate_validation.validation
            value_selector: ["aggregate_validation", "validation"]
          - name: aggregate_validation.optimization
            value_selector: ["aggregate_validation", "optimization"]

    # ---- æœ€ç»ˆæ ¼å¼åŒ– ----
    - id: final_formatter
      type: template
      title: æœ€ç»ˆæ ¼å¼åŒ–
      position:
        x: 1700
        y: 450
      data:
        template: |
          # ğŸš€ ç”Ÿæˆçš„å·¥ä½œæµ

          ## ğŸ“‹ ä½¿ç”¨æ–‡æ¡£
          {{#agent_documenter.text#}}

          ---

          ## âš™ï¸ æŠ€æœ¯è¯¦æƒ…

          ### éªŒè¯ç»“æœ
          {{#aggregate_validation.validation#}}

          ### ä¼˜åŒ–å»ºè®®
          {{#aggregate_validation.optimization#}}

          ---

          ## ğŸ“„ å¯¼å‡ºçš„ YAML

          ```yaml
          {{#yaml_cleaner.yaml#}}
          ```

          ---

          ## ğŸ“¥ å¯¼å…¥æ­¥éª¤
          1. ç‚¹å‡»å¯¹è¯ä¸­çš„ "å¤åˆ¶" æŒ‰é’®å¤åˆ¶ä¸Šæ–¹ YAML
          2. è¿›å…¥ Dify æ§åˆ¶å° â†’ å·¥ä½œå®¤
          3. ç‚¹å‡» "å¯¼å…¥ DSL æ–‡ä»¶"
          4. ç²˜è´´ YAML å†…å®¹ï¼Œç‚¹å‡»ç¡®è®¤
          5. å®Œæˆå¯¼å…¥åå³å¯ä½¿ç”¨

          ---

          âœ… **çŠ¶æ€**: {{#yaml_cleaner.valid??ç”ŸæˆæˆåŠŸï¼Œå¯ç›´æ¥å¯¼å…¥ âœ…:éœ€è¦äººå·¥æ£€æŸ¥ âš ï¸#}}
          ğŸ“Š **èŠ‚ç‚¹æ•°**: {{#yaml_cleaner.has_nodes??åŒ…å«èŠ‚ç‚¹å®šä¹‰:æœªæ£€æµ‹åˆ°èŠ‚ç‚¹#}}
          ğŸ”— **è¾¹è¿æ¥**: {{#yaml_cleaner.has_edges??å·²é…ç½®è¿æ¥:æ— è¾¹å®šä¹‰#}}

        variables:
          - name: agent_documenter.text
            value_selector: ["agent_documenter", "text"]
          - name: aggregate_validation.validation
            value_selector: ["aggregate_validation", "validation"]
          - name: aggregate_validation.optimization
            value_selector: ["aggregate_validation", "optimization"]
          - name: yaml_cleaner.yaml
            value_selector: ["yaml_cleaner", "yaml"]
          - name: yaml_cleaner.valid
            value_selector: ["yaml_cleaner", "valid"]
          - name: yaml_cleaner.has_nodes
            value_selector: ["yaml_cleaner", "has_nodes"]
          - name: yaml_cleaner.has_edges
            value_selector: ["yaml_cleaner", "has_edges"]

    # ---- ç»“æŸèŠ‚ç‚¹ ----
    - id: end
      type: end
      title: ç»“æŸ
      position:
        x: 1950
        y: 450
      data:
        outputs:
          - name: workflow_yaml
            value_selector: ["yaml_cleaner", "yaml"]
            description: ç”Ÿæˆçš„å·¥ä½œæµ YAML
          - name: documentation
            value_selector: ["agent_documenter", "text"]
            description: ä½¿ç”¨æ–‡æ¡£
          - name: is_valid
            value_selector: ["yaml_cleaner", "valid"]
            description: éªŒè¯çŠ¶æ€

  # ========== èŠ‚ç‚¹è¿æ¥ ==========
  edges:
    # å¼€å§‹ -> ä¸‰ä¸ªå¹¶è¡Œä»£ç†
    - id: start_to_analyst
      source: start
      target: agent_requirement_analyst
      type: direct

    - id: start_to_architect
      source: start
      target: agent_architect
      type: direct

    - id: start_to_advisor
      source: start
      target: agent_tech_advisor
      type: direct

    # ä¸‰ä¸ªä»£ç† -> èšåˆ
    - id: analyst_to_aggregate
      source: agent_requirement_analyst
      target: aggregate_agent_outputs
      type: direct

    - id: architect_to_aggregate
      source: agent_architect
      target: aggregate_agent_outputs
      type: direct

    - id: advisor_to_aggregate
      source: agent_tech_advisor
      target: aggregate_agent_outputs
      type: direct

    # èšåˆ -> å®ç°
    - id: aggregate_to_impl
      source: aggregate_agent_outputs
      target: agent_implementer
      type: direct

    # å®ç° -> ä¸‰ä¸ªå¹¶è¡ŒéªŒè¯/ä¼˜åŒ–/æ–‡æ¡£
    - id: impl_to_validator
      source: agent_implementer
      target: agent_validator
      type: direct

    - id: impl_to_optimizer
      source: agent_implementer
      target: agent_optimizer
      type: direct

    # å®ç°/éªŒè¯/ä¼˜åŒ– -> æ±‡æ€»
    - id: impl_to_validation_agg
      source: agent_implementer
      target: aggregate_validation
      type: direct

    - id: validator_to_validation_agg
      source: agent_validator
      target: aggregate_validation
      type: direct

    - id: optimizer_to_validation_agg
      source: agent_optimizer
      target: aggregate_validation
      type: direct

    # æ±‡æ€» -> æ¸…ç†
    - id: validation_to_cleaner
      source: aggregate_validation
      target: yaml_cleaner
      type: direct

    # æ±‡æ€» -> æ–‡æ¡£
    - id: validation_to_doc
      source: aggregate_validation
      target: agent_documenter
      type: direct

    # æ¸…ç†/æ–‡æ¡£ -> æœ€ç»ˆæ ¼å¼åŒ–
    - id: cleaner_to_final
      source: yaml_cleaner
      target: final_formatter
      type: direct

    - id: doc_to_final
      source: agent_documenter
      target: final_formatter
      type: direct

    # æœ€ç»ˆ -> ç»“æŸ
    - id: final_to_end
      source: final_formatter
      target: end
      type: direct

  environment_variables: []
  conversation_variables: []
